"undefined"==typeof hzflip&&(hzflip={}),null==hzflip.controls&&(hzflip.controls={}),hzflip.controls={isEditMode:!1,init:function(e){hzflip.controls.zoom.bindings(),hzflip.controls.fullscreen.bindings(),hzflip.controls.navigation.bindings(e),hzflip.controls.slider.bindings(e,"SWIPER"===e.viewer),hzflip.controls.sound.bindings(e)},setEditMode:function(e){hzflip.controls.zoom.setEditMode(e),hzflip.controls.fullscreen.setEditMode(e),this.isEditMode=e},initViewerControls:function(e){hzflip.controls.slider.bindings(e,"SWIPER"===e.viewer)},turned:function(e){hzflip.controls.slider.turned(e),hzflip.controls.navigation.turned(e),$(".logo-backs2").parent().is("a")&&(1==e?$(".logo-backs2").css("z-index",1):$(".logo-backs2").css("z-index",0))},turning:function(e){hzflip.controls.slider.turning(e),hzflip.controls.navigation.turning(e),hzflip.controls.sound.turning(e)},resizeViewport:function(e){hzflip.controls.navigation.resizeViewport(e)},goToPage:function(e,i){heyzine.goToPage(e,i)},setZoom:function(e,i){hzflip.controls.zoom.setZoom(e,i)}},"undefined"==typeof hzflip&&(hzflip={}),null==hzflip.controls&&(hzflip.controls={}),hzflip.controls.fullscreen={isEditMode:!1,bindings:function(){$(".fullscreen-button").on("click",(function(){return scaler.isInIframe()&&!hzflip.controls.fullscreen.isSupported()?hzflip.controls.fullscreen.toggleMessage():hzflip.controls.fullscreen.toggle(),!1})),scaler.isInIframe()||this.isSupported()||$(".fullscreen-button").hide()},isSupported:function(){var e=document,i=!0;$("#canvas").parent().is("body")||(e=$("#canvas").parent().get(0),i=!1);var t=e;return i&&(t=e.documentElement),!!t.requestFullScreen||(!!t.mozRequestFullScreen||!!t.webkitRequestFullScreen)},toggleMessage:function(){$(".fullscreen-button").hasClass("hz-icn-fullscreen-on")?($(".fullscreen-button").removeClass("hz-icn-fullscreen-on").addClass("hz-icn-fullscreen-off"),window.parent.postMessage({action:"heyzineFullscreen",value:!0,target:document.location.href},"*")):($(".fullscreen-button").removeClass("hz-icn-fullscreen-off").addClass("hz-icn-fullscreen-on"),window.parent.postMessage({action:"heyzineFullscreen",value:!1,target:document.location.href},"*"))},toggle:function(){if(!this.isEditMode){var e=document,i=!0;if($("#canvas").parent().is("body")||(e=$("#canvas").parent().get(0),i=!1),e.fullScreenElement&&null!==e.fullScreenElement||!document.mozFullScreen&&!document.webkitIsFullScreen){var t=e;i&&(t=e.documentElement),t.requestFullScreen?t.requestFullScreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullScreen&&t.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT),$(".fullscreen-button").removeClass("hz-icn-fullscreen-on").addClass("hz-icn-fullscreen-off")}else document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen(),$(".fullscreen-button").removeClass("hz-icn-fullscreen-off").addClass("hz-icn-fullscreen-on")}},setEditMode:function(e){this.isEditMode=e}},"undefined"==typeof hzflip&&(hzflip={}),null==hzflip.controls&&(hzflip.controls={}),hzflip.controls.navigation={inited:!1,numPages:0,hashNavigation:!0,firstTurned:!1,bindings:function(e){var i=hzflip.controls.navigation;i.numPages=e.num_pages,i.hashNavigation=null==e.hashNavigation||!1!==e.hashNavigation,i.inited||(i.inited=!0,null!=heyzine.design.data.embed_mode&&1==heyzine.design.data.embed_mode||$(document).keydown((function(e){switch(e.keyCode){case 37:hzflip.controls.goToPage("previous","keyboard"),e.preventDefault();break;case 39:hzflip.controls.goToPage("next","keyboard"),e.preventDefault();break;case 27:hzflip.controls.setZoom("zoomOut"),e.preventDefault()}})),$(document).on("click",".btnNext",(function(e){hzflip.controls.goToPage("next","button")})).on("mouseenter",".btnNext",(function(){$(this).hasClass("next-button")&&$(this).addClass("next-button-hover")})).on("mouseleave",".btnNext",(function(){$(this).hasClass("next-button")&&$(this).removeClass("next-button-hover")})),$(document).on("click",".btnPrevious",(function(e){hzflip.controls.goToPage("previous","button")})).on("mouseenter",".btnPrevious",(function(){$(this).hasClass("previous-button")&&$(this).addClass("previous-button-hover")})).on("mouseleave",".btnPrevious",(function(){$(this).hasClass("previous-button")&&$(this).removeClass("previous-button-hover")})),$(document).on("click","#btnNavPrev",(function(){return hzflip.controls.goToPage("previous","button-nav"),!1})),$(document).on("click","#btnNavNext",(function(){return hzflip.controls.goToPage("next","button-nav"),!1})),$(document).on("click","#btnNavStart",(function(){const e=""==$.trim(heyzine.design.data.start_page)?1:heyzine.design.data.start_page;return hzflip.controls.goToPage(e,"button-nav"),!1})),$(document).on("click","#btnNavEnd",(function(){const e=""==$.trim(heyzine.design.data.end_page)?i.numPages:heyzine.design.data.end_page;return hzflip.controls.goToPage(e,"button-nav"),!1})),i.hashNavigation&&"undefined"!=typeof Hash&&Hash.on("^page/([0-9]*)$",{yep:function(e,i){console.log("hashyep"),console.log(i);var t=i[1];void 0!==t&&hzflip.controls.goToPage(parseInt(t),"url")},nop:function(e){console.log("hashnop"),hzflip.controls.goToPage(1,"url")}}))},turned:e=>{var i=hzflip.controls.navigation;i.showHide(e),i.hashNavigation&&"undefined"!=typeof Hash&&i.firstTurned?(console.log("hashturned"),Hash.go("page/"+e).update()):i.firstTurned=!0},turning:e=>{null!=e&&hzflip.controls.navigation.showHide(e)},resizeViewport:e=>{$(".next-button").css({height:e.height,backgroundPosition:"-38px "+(e.height/2-16)+"px"}),$(".previous-button").css({height:e.height,backgroundPosition:"-4px "+(e.height/2-16)+"px"})},showHide:e=>{1==e?$(".previous-button").hide():$(".previous-button").show(),heyzine.isLastPage(e)?$(".next-button").hide():$(".next-button").show()}},"undefined"==typeof hzflip&&(hzflip={}),null==hzflip.controls&&(hzflip.controls={}),hzflip.controls.slider={numPages:0,config:null,drag:!1,positionSliderThumb:function(e,i){var t=$(e).parent().find(i).outerWidth()/2,n=$(e).width(),s=n/2,o=(e.value-1)/(e.max-e.min);(isNaN(o)||o<0)&&(o=0);var a=o*n,l=a-t-42.5*((a-s)/s);$(e).parent().find(i).css("left",l+"px")},isSinglePage:function(){return"SWIPER"==heyzine.config.viewer},bindings:function(e){if($(".page-bar").length<=0||0==e.design.show_slider)return;const i=null==e.design.show_slider||1==e.design.show_slider||3==e.design.show_slider,t=2==e.design.show_slider||3==e.design.show_slider;var n=hzflip.controls.slider;this.config=e,n.numPages=e.num_pages,$(".page-bar input[type=range]").attr("min",1),$(".page-bar input[type=range]").attr("max",n.isSinglePage()?n.numPages:n.numPages%2==0?Math.floor((n.numPages-2)/2)+2:Math.floor(n.numPages/2)+1),t?($("span.page-bar-num").show(),$(".page-bar .page-bar-value").addClass("page-bar-num-enabled")):$(".page-bar .page-bar-value").removeClass("page-bar-num-enabled"),$(".page-bar input[type=range]").on("input mousedown",(function(){if(n.drag=!0,i){let e=100;!0===heyzine.config.toc?e=1:$(".page-bar-value").hide(),n.positionSliderThumb(this,"span.page-bar-value"),n.thumbnails($(this).parent().find("span.page-bar-value"),$(this).val(),e).then(()=>{n.drag&&(n.positionSliderThumb(this,"span.page-bar-value"),$(".page-bar-value").fadeIn("fast"))}).catch(()=>{})}if(t){$("span.page-bar-num").show();const e=n.rangeToPage($(this).val());null==e[1]?$("span.page-bar-num").html(e[0]):$("span.page-bar-num").html(e[0]+" - "+e[1]),n.positionSliderThumb(this,"span.page-bar-num")}})),$(".page-bar input[type=range]").on("mouseup touchend",(function(){n.drag=!1,setTimeout(()=>{i&&$(".page-bar-value").fadeOut("fast"),t&&$("span.page-bar-num").fadeOut("fast")},500);let e=n.isSinglePage()?$(this).val():1==$(this).val()?1:2*$(this).val()-2;hzflip.controls.goToPage(e,"slider")}))},turned:function(e){$(".page-bar").length<=0||null==this.config||0==this.config.design.show_slider||setTimeout(()=>{let i=1;i=this.isSinglePage()?e:1==e?1:Math.floor(e/2)+1,$(".page-bar input[type=range]").val(i)},200)},turning:e=>{},rangeToPage:function(e){var i,t=this.numPages;return t%2==0&&(i=(t-2)/2+2),t%2!=0&&(i=(t-1)/2+1),this.isSinglePage()||1==e?[parseInt(e),null]:e==i?t%2!=0?[2*(e-1),2*(e-1)+1]:[2*(e-1),null]:[2*(e-1),2*(e-1)+1]},thumbnails:function(e,i,t){if(!($(".page-bar").length<=0||null==this.config||0==this.config.design.show_slider))return new Promise((n,s)=>{"undefined"!=typeof timerThumbs&&clearTimeout(timerThumbs),timerThumbs=setTimeout(()=>{const t=this.rangeToPage(i);heyzine.loadPageThumbnails(t[0],t[1],e).then(()=>{n()})},t)})}},"undefined"==typeof hzflip&&(hzflip={}),null==hzflip.controls&&(hzflip.controls={}),hzflip.controls.zoom={pos:{},isEditMode:!1,initial:{},timerDelay:!1,isZoomIn:!1,isZoomProgress:!1,isZoomEnabled:!0,hammer:null,xMove:null,yMove:null,state:{inc:1.15,scale:1,xLast:0,yLast:0,xImage:0,yImage:0},bindings:function(){var e=hzflip.controls.zoom;null!=heyzine.design.data.embed_mode&&1==heyzine.design.data.embed_mode||0==heyzine.design.data.show_zoom&&0==heyzine.design.data.click_zoom?this.isZoomDisabled=!0:this.isZoomDisabled=!1,this.initial.transform=$("#magazineViewport").css("transform"),this.initial.origin=$("#magazineViewport").css("transform-origin"),this.xMove=null,this.yMove=null,this.hammer=new Hammer.Manager($("#canvas").get(0),{recognizers:[[Hammer.Pinch,{enable:!0}]]}),this.hammer.options.domEvents=!0;var i=new Hammer.Tap({event:"singletap"}),t=new Hammer.Tap({event:"doubletap",taps:2});this.hammer.add([t,i]),t.recognizeWith(i),i.requireFailure([t]),$(window).on("mouseout",()=>{this.moveEnd()}),$("#canvas").on("mouseout",()=>{this.moveEnd()}),$("#canvas").on("touchstart",e=>{this.moveStart(e.touches[0].pageX,e.touches[0].pageY)}),$("#canvas").on("touchend",()=>{this.moveEnd()}),$("#canvas").on("touchmove",e=>{this.moveProgress(e.touches[0].pageX,e.touches[0].pageY)}),$("#canvas").on("mousedown",e=>{this.moveStart(e.pageX,e.pageY)}),$("#canvas").on("mouseup",()=>{this.moveEnd()}),$("#canvas").on("mousemove",e=>{this.moveProgress(e.pageX,e.pageY)}),this.hammer.on("pinch",(function(i){return e.isEditMode||e.isZoomDisabled||(e.zoomSet({size:i.scale},{x:i.center.x-$("#canvas").offset().left,y:i.center.y-$("#canvas").offset().top}),i.srcEvent.stopPropagation(),i.srcEvent.stopImmediatePropagation(),i.srcEvent.preventDefault()),!1})),$("#canvas").mousewheel((function(i,t){return e.isEditMode||e.isZoomDisabled||0==heyzine.design.data.click_zoom||e.zoomSet({dir:t},{x:i.pageX-$(this).offset().left,y:i.pageY-$(this).offset().top}),!(!e.isZoomDisabled&&0!=heyzine.design.data.click_zoom)})),$(".zoom-icon").on("click",(function(){e.isEditMode||e.isZoomDisabled||(e.isZoomIn?e.zoomReset():e.zoomCenter())})),this.hammer.on("doubletap",(function(i){"pnlControls"!=$(i.target).attr("id")&&"pnlControls"!=$(i.target).parent().attr("id")&&0!=heyzine.design.data.click_zoom&&(e.isEditMode||e.isZoomDisabled||(e.isZoomIn?e.zoomReset():e.zoomCenter()),i.srcEvent.stopPropagation(),i.srcEvent.stopImmediatePropagation())})),$(".btnZoomMore").on("dblclick",(function(e){return e.stopPropagation(),e.preventDefault(),!1})),$(".btnZoomLess").on("dblclick",(function(e){return e.stopPropagation(),e.preventDefault(),!1})),$(".btnZoomMore").on("click",(function(i){e.zoomCenter(1)})),$(".btnZoomLess").on("click",(function(i){e.zoomCenter(-1)}))},moveStart:function(e,i){if(!this.isEditMode&&!this.isZoomDisabled&&1!=this.state.scale){var t=hzflip.controls.zoom.pos;t.dragging=!0,this.xMove=e,this.yMove=i,t.xInit=t.xNew,t.yInit=t.yNew,$(".magazine-viewport").addClass("grabbing")}},moveEnd:function(){if(this.isEditMode||this.isZoomDisabled)return!0;hzflip.controls.zoom.pos.dragging=!1,$(".magazine-viewport").removeClass("grabbing")},moveProgress:function(e,i){if(this.isEditMode||this.isZoomDisabled||1==this.state.scale)return!0;var t=hzflip.controls.zoom.pos;if(t.dragging){var n=t.xNew,s=t.yNew,o=this.state.xLast,a=this.state.yLast,l=this.xMove-e,r=this.yMove-i;this.xMove=e,this.yMove=i,t.xNew-=l/this.state.scale,t.yNew-=r/this.state.scale,this.state.xLast-=l,this.state.yLast-=r,$("#magazineViewport").css("transform","scale("+t.scale+")translate("+t.xNew+"px, "+t.yNew+"px)");let d=null,h=null,c=null,p=null;const g=heyzine.getVisiblePages();for(let e=0;e<g.length;e++)(null==d||d>$('#magazineViewport [page="'+g[e]+'"]').offset().left)&&(d=$('#magazineViewport [page="'+g[e]+'"]').offset().left),(null==h||h>$('#magazineViewport [page="'+g[e]+'"]').offset().top)&&(h=$('#magazineViewport [page="'+g[e]+'"]').offset().top),(null==p||p<$('#magazineViewport [page="'+g[e]+'"]').offset().top+$('#magazineViewport [page="'+g[e]+'"]').height()*this.state.scale)&&(p=$('#magazineViewport [page="'+g[e]+'"]').offset().top+$('#magazineViewport [page="'+g[e]+'"]').height()*this.state.scale),(null==c||c<$('#magazineViewport [page="'+g[e]+'"]').offset().left+$('#magazineViewport [page="'+g[e]+'"]').width()*this.state.scale)&&(c=$('#magazineViewport [page="'+g[e]+'"]').offset().left+$('#magazineViewport [page="'+g[e]+'"]').width()*this.state.scale);d-=$("#canvas").offset().left,c-=$("#canvas").offset().left,h-=$("#canvas").offset().top,p-=$("#canvas").offset().top,(d>0&&t.xNew>n||c<$("#canvas").width()&&t.xNew<n)&&(t.xNew=n,this.state.xLast=o,$("#magazineViewport").css("transform","scale("+t.scale+")translate("+t.xNew+"px, "+t.yNew+"px)")),(h>0&&t.yNew>s||p<$("#canvas").height()&&t.yNew<s)&&(t.yNew=s,this.state.yLast=a,$("#magazineViewport").css("transform","scale("+t.scale+")translate("+t.xNew+"px, "+t.yNew+"px)"))}},setZoom:function(e,i,t){this.isEditMode||this.isZoomDisabled||("zoomIn"==e?this.zoomCenter():"zoomOut"==e&&this.zoomReset())},zoomReset:function(){this.state.scale=1,this.state.xImage=0,this.state.yImage=0,this.state.xLast=0,this.state.yLast=0,$("#magazineViewport").addClass("animated"),$("#magazineViewport").css("transform",this.initial.transform),$("#magazineViewport").css("transform-origin",this.initial.origin),heyzine.setZoomViewer("zoomOut"),setTimeout(()=>{$("#magazineViewport").removeClass("animated")},500),this.setZoomOutControls()},zoomCenter:function(e,i){const t=null!=e?e:1,n=null!=i?i:1.5;$("#magazineViewport").addClass("animated"),this.zoomSet({dir:t,increment:n},{x:$("#canvas").width()/2,y:$("#canvas").height()/2}),setTimeout(()=>{$("#magazineViewport").removeClass("animated")},500)},zoomSet:function(e,i){var t=i.x,n=i.y;if(this.state.xImage=this.state.xImage+(t-this.state.xLast)/this.state.scale,this.state.yImage=this.state.yImage+(n-this.state.yLast)/this.state.scale,this.state.scale>1?this.setZoomInControls():this.setZoomOutControls(),e.size)1==this.state.scale&&e.size>1&&(this.setZoomInControls(),heyzine.setZoomViewer("zoomIn")),this.state.scale=e.size,this.state.scale=this.state.scale<1?1:this.state.scale>6?6:this.state.scale;else{var s=null!=e.increment?e.increment:this.state.inc;e.dir>0?(1==this.state.scale&&(this.setZoomInControls(),heyzine.setZoomViewer("zoomIn")),this.state.scale*=s):this.state.scale/=s,this.state.scale=this.state.scale<1?1:this.state.scale>6?6:this.state.scale}var o=(t-this.state.xImage)/this.state.scale,a=(n-this.state.yImage)/this.state.scale;this.state.xLast=t,this.state.yLast=n;var l=hzflip.controls.zoom.pos;l.scale=this.state.scale,l.xNew=o,l.yNew=a,l.xImage=this.state.xImage,l.yImage=this.state.yImage,!this.timerDelay&&(this.state.scale>=1.5||this.state.scale<=1)&&(this.timerDelay=!0,setTimeout(()=>{const e=heyzine.getVisiblePages();for(let i=0;i<e.length;i++){const t=e[i],n=$("[page="+e[i]+"] .page-cont"),s=this.state.scale<=1?"normal":this.state.scale>2.5?"xlarge":"large";heyzine.loadPageView(t,n,s).then(()=>{this.timerDelay=!1}).catch(()=>{})}},500)),1==this.state.scale?(this.zoomReset(),this.state.xLast=0,this.state.yLast=0,this.state.xImage=0,this.state.yImage=0):($("#magazineViewport").css("transform","scale("+l.scale+")translate("+l.xNew+"px, "+l.yNew+"px)"),"SWIPER"!=heyzine.config.viewer&&$("#magazineViewport").css("transform-origin",l.xImage+"px "+l.yImage+"px"))},setZoomInControls:function(){this.isZoomIn=!0,0!=heyzine.config.design.show_slider&&$(".control-bottom .page-bar").hide(),$(".zoom-icon").removeClass("zoom-icon-in").addClass("zoom-icon-out"),$("#pnlZoomStep").fadeIn("fast"),$(".btnPrevious").fadeOut("fast"),$(".btnNext").fadeOut("fast"),$(".magazine-viewport").addClass("grab")},setZoomOutControls:function(){this.isZoomIn=!1,0!=heyzine.config.design.show_slider&&$(".control-bottom .page-bar").fadeIn(),$(".zoom-icon").removeClass("zoom-icon-out").addClass("zoom-icon-in"),$("#pnlZoomStep").fadeOut("fast"),$(".btnPrevious").fadeIn("fast"),$(".btnNext").fadeIn("fast"),$(".magazine-viewport").removeClass("grab").removeClass("grabbing")},setEditMode:function(e){this.isEditMode=e}},"undefined"==typeof hzflip&&(hzflip={}),null==hzflip.controls&&(hzflip.controls={}),hzflip.controls.sound={isSoundEnabled:!0,isPageTurnSound:!1,config:{},bindings:function(){$("#btnSoundOff").on("click",()=>(this.isSoundEnabled=!this.isSoundEnabled,this.isSoundEnabled?($("#btnSoundOff").addClass("hz-icn-sound-on"),$("#btnSoundOff").removeClass("hz-icn-sound-off")):($("#btnSoundOff").removeClass("hz-icn-sound-on"),$("#btnSoundOff").addClass("hz-icn-sound-off")),heyzine.layers.soundToggle(this.isSoundEnabled),!1))},turning:function(e){if(null!=heyzine.design&&null!=heyzine.design.data&&null!=heyzine.design.data.sound_flip&&(this.isPageTurnSound=!0===heyzine.design.data.sound_flip||1==heyzine.design.data.sound_flip),this.isSoundEnabled&&this.isPageTurnSound){const i=$("#audioPageTurn").get(0),t=$("#audioPageTurn2").get(0),n=$("#audioPageTurn3").get(0);if(null==e)i.volume=.2,i.pause(),i.currentTime=0,i.play();else{const i=heyzine.getVisiblePages();e<i[0]-1||2==i.length&&e>i[1]+1||1==i.length&&e>i[0]+1?(n.volume=.4,n.pause(),n.currentTime=0,n.play()):(t.volume=.4,t.pause(),t.currentTime=0,t.play())}}}},"undefined"==typeof hzflip&&(hzflip={}),hzflip.layers={layers:[],layersDom:[],layersComp:[],config:null,isEditMode:!1,singlePage:!1,soundEnabled:null,lastPage:null,init:function(e){this.config=e,this.load(e.layers)},load:function(e,i){this.layers=e,this.singlePage=null==i?"SWIPER"===this.config.viewer:i,this.resetLayersComp(),null!=this.config.sound_flip&&(1==$.trim(this.config.sound_flip)||!0===this.config.sound_flip)||this.existSoundLayers()?$("#btnSoundOff").show():$("#btnSoundOff").hide()},existSoundLayers:function(){return null!=this.layers&&this.layers.findIndex(e=>"background"==e.type&&"audio"==e.media.type||"video"==e.type)>-1},setEditMode:function(e){this.isEditMode=e},turning:function(e){if(null!=this.layers)for(let e=0;e<this.layers.length;e++)this.layers[e].visible=!1},turned:function(e){null!=this.layers&&(this.showPageLayers(e),this.startTurnLayerActions(e),this.repositionEditLayers(e)),this.lastPage=e},repositionEditLayers:function(e){if(this.isEditMode)for(let i=0;i<this.layers.length;i++){const t=this.layers[i];if(t.visible&&!this.singlePage||t.page==e&&this.singlePage){const e=$(".page-wrapper[page="+t.page+"]").get(0),n=$("#content");this.layers[i].css.width=$(e).width()/t.wrapper.width*t.css.width,this.layers[i].css.height=$(e).height()/t.wrapper.height*t.css.height,this.layers[i].css.left=$(e).offset().left-n.offset().left+(t.css.left-t.wrapper.left)*($(e).width()/t.wrapper.width),this.layers[i].css.top=$(e).offset().top-n.offset().top+(t.css.top-t.wrapper.top)*($(e).height()/t.wrapper.height),this.layers[i].wrapper={width:$(e).width(),height:$(e).height(),left:$(e).offset().left-$(n).offset().left,top:$(e).offset().top-$(n).offset().top}}}},showPageLayers:function(e){for(let e=0;e<this.layers.length;e++)this.layers[e].visible=!1;for(let i=0;i<this.layers.length;i++)if(this.singlePage||1==e||e==this.config.num_pages&&this.config.num_pages%2==0?e==this.layers[i].page&&(this.layers[i].visible=!0):e!=this.config.num_pages&&e!=this.config.num_pages-1||this.config.num_pages%2==0?(e%2==0&&(e==this.layers[i].page||e+1==this.layers[i].page&&e+1!=this.config.num_pages)||e%2!=0&&(e==this.layers[i].page||e-1==this.layers[i].page&&e-1!=1))&&(this.layers[i].visible=!0):e!=this.layers[i].page&&e+1!=this.layers[i].page||(this.layers[i].visible=!0),this.layersDom[i]){this.layers[i].visible&&this.layers[i].action&&1==this.layers[i].action.highlight?this.layersDom[i].addClass("layer-action-highlight"):this.layersDom[i].removeClass("layer-action-highlight");const t=this.layers[i];if(t&&"video"==t.type)if("youtube"==t.media.type){const n=$(this.layersDom[i]).find("iframe"),s=n.attr("src")+"&cache="+(new Date).getTime();t.visible&&!this.singlePage||t.page==e&&this.singlePage?"1"==t.media.options.autoplay&&n.attr("src",s.replace("&autoplay=0","&autoplay=1")):n.attr("src",s.replace("&autoplay=1","&autoplay=0"))}else if(null!=this.layersDom[i]){const n=$(this.layersDom[i]).find("video").get(0);t.visible&&!this.singlePage||t.page==e&&this.singlePage?"1"==t.media.options.autoplay&&(n.pause(),n.currentTime=0,n.load(),n.play()):n.pause()}}},startTurnLayerActions:function(e){if(!this.isEditMode&&null!=this.layers)for(let i=0;i<this.layers.length;i++){let t=this.layers[i];"background"==t.type&&"audio"==t.media.type&&this.startTurnAudio(e,t,i)}},startTurnAudio:function(e,i,t){let n=t;this.layersComp[n]||(this.layersComp[n]=new Audio(i.media.url),null!=i.media.options&&i.media.options.volume&&(this.layersComp[n].volume=i.media.options.volume/100),this.layersComp[n].addEventListener("play",e=>{i.media.played=!0}),null!=i.media.options&&i.media.options.loop&&this.layersComp[n].addEventListener("ended",e=>{null!=this.lastPage&&this.lastPage>=this.layers[n].page&&this.lastPage<=this.layers[n].page_end&&(this.layersComp[n].currentTime=0,this.layersComp[n].play())}));let s=e>=i.page&&e<=i.page_end,o=e<i.page||e>i.page_end,a=null!=this.lastPage&&this.lastPage>=i.page&&this.lastPage<=i.page_end;if((null==this.lastPage||this.lastPage<i.page||this.lastPage>i.page_end)&&s){if(null!=i.media.options&&i.media.options.once&&i.media.played)return;!1===this.soundEnabled&&(this.layersComp[n].muted=!this.soundEnabled),this.layersComp[n].currentTime=0,this.layersComp[n].play()}else a&&s?i.media.played||this.layersComp[n].play():o&&a&&(null!=i.media.options&&null!=i.media.options.keep&&!1!==i.media.options.keep||this.layersComp[n].pause())},resetLayersComp:function(){for(let e=0;e<this.layersComp.length;e++)this.layersComp[e]&&this.layersComp[e].pause();this.layersComp.length=0},destroyViewportLayers:function(e){return new Promise((e,i)=>{e("")})},loadViewportLayers:function(e){return new Promise((e,i)=>{e("")})},loadPageLayers:function(e,i,t){if($(i).find(".layer-action-render").remove(),this.isEditMode||null==this.layers)return new Promise((e,i)=>{e("")});for(let t=0;t<this.layers.length;t++)if(e==this.layers[t].page){const e=$('<div class="layer-action-render" id="layer'+this.layers[t].id+'" style="position: absolute; "></div>');if(e.appendTo(i).css({left:(this.layers[t].css.left-this.layers[t].wrapper.left+1)/this.layers[t].wrapper.width*100+"%",top:(this.layers[t].css.top-this.layers[t].wrapper.top+1)/this.layers[t].wrapper.height*100+"%",width:this.layers[t].css.width/this.layers[t].wrapper.width*100+"%",height:this.layers[t].css.height/this.layers[t].wrapper.height*100+"%"}),this.layersDom[t]=e,"picture"==this.layers[t].type)e.addClass("layer-action-pic"),e.append('<img src="'+this.layers[t].media.url+'" draggable="false" class="layer-pic" />');else if("video"==this.layers[t].type){e.addClass("layer-action-vid");const i=this.layers[t].media;"modal"==i.options.display||"fullscreen"==i.options.display?i.options.poster?e.append('<img src="'+i.options.poster+'" draggable="false" class="layer-pic" />'):e.addClass("layer-action-no-content"):"youtube"==i.type?e.append('<iframe class="layer-vid" allow="autoplay" allowfullscreen src="'+i.url.replace("&autoplay=1","&autoplay=0")+'"></iframe>'):e.append('<video class="layer-vid" '+(i.options&&"1"==i.options.controls?"controls ":'onclick="this.paused ? this.play() : this.pause();" ')+(i.options&&"1"==i.options.mute?"muted ":"")+'> <source src="'+i.url+'" type="video/mp4"></video>')}else if("web"==this.layers[t].type){e.addClass("layer-action-web");const i=this.layers[t].media;null!=i.url&&"null"!=i.url&&("modal"==i.options.display||"fullscreen"==i.options.display?i.options.poster?e.append('<img src="'+i.options.poster+'" draggable="false" class="layer-pic" />'):e.addClass("layer-action-no-content"):e.append('<iframe class="layer-web" allowfullscreen src="'+i.url+'"></iframe>'))}this.loadLayerActions(e,this.layers[t],"#layer"+this.layers[t].id),1==this.layers[t].action.highlight&&setTimeout(()=>{e.addClass("layer-action-highlight")},1e3)}return new Promise((e,i)=>{e("")})},loadLayerActions:function(e,i,t){$("#magazineViewport").on("click",t,e=>{if("page"==i.action.type?heyzine.goToPage(parseInt(i.action.target)):"link"==i.action.type&&""!=$.trim(i.action.target)&&(i.action.extra&&"1"==i.action.extra.new_tab?window.open(i.action.target,"target=_BLANK"):document.location.href=i.action.target),"video"!=i.type||"modal"!=i.media.options.display&&"fullscreen"!=i.media.options.display){if("web"==i.type&&("modal"==i.media.options.display||"fullscreen"==i.media.options.display)){let t="modal"==i.media.options.display?"#modalOver":"#modalFull";$(t).find("video").remove(),$(t).find("iframe").remove(),$(t).append('<iframe class="layer-web" allowfullscreen src="'+i.media.url+'"></iframe>'),this.showModal(t,e)}}else{let t="modal"==i.media.options.display?"#modalOver":"#modalFull";if($(t).find("video").remove(),$(t).find("iframe").remove(),"youtube"==i.media.type){let e=i.media.url;null==this.soundEnabled||(1==this.soundEnabled?e=e.replace("&mute=0","&mute=1"):0==this.soundEnabled&&(e=e.replace("&mute=1","&mute=0"))),$(t).append('<iframe class="layer-vid" allowfullscreen src="'+e+'"></iframe>')}else{let e;null==this.soundEnabled?e=i.media.options&&"1"==i.media.options.mute?"muted ":"":1==this.soundEnabled?e="":0==this.soundEnabled&&(e="muted"),$(t).append('<video class="layer-vid" '+(i.media.options&&"1"==i.media.options.controls?"controls ":'onclick="this.paused ? this.play() : this.pause();" ')+e+(i.media.options&&"1"==i.media.options.autoplay?"autoplay ":"")+'> <source src="'+i.media.url+'" type="video/mp4"></video>')}this.showModal(t,e)}})},render:function(e,i){},soundToggle:function(e){if(this.soundEnabled=e,null!=this.layers){for(let e=0;e<this.layers.length;e++)if(this.layersDom[e]){const i=this.layers[e];if(i&&"video"==i.type)if("youtube"==i.media.type){const i=$(this.layersDom[e]).find("iframe"),t=i.attr("src");this.soundEnabled?i.attr("src",t.replace("&mute=1","&mute=0")):i.attr("src",t.replace("&mute=0","&mute=1"))}else{$(this.layersDom[e]).find("video").get(0).muted=!this.soundEnabled}}for(let e=0;e<this.layersComp.length;e++)this.layersComp[e]&&(null==this.soundEnabled?this.layersComp[e].muted=!1:this.layersComp[e].muted=!this.soundEnabled)}},showModal:function(e,i){if("#modalFull"==e)$(e).fadeIn("fast");else{let t=i.pageX-192;t<0&&(t=0);let n=i.pageY-216-15;n<0&&(n=0),$(e).css({left:t,top:n,width:384,height:216}),$(e).fadeIn("fast"),$(document).one("click",(function(i){0===$(i.target).closest(e).length&&$(e).fadeOut("fast")})),i.preventDefault(),i.stopPropagation()}}},"undefined"==typeof hzflip&&(hzflip={}),null==hzflip.layers&&(hzflip.layers={}),hzflip.layers.text={page:0,css:{left:0,right:0,top:0,bottom:0,width:"200px",height:"100px",zIndex:100},content:"text",target:"page",layer:null,render:function(e,i,t){null!=this.layer&&this.layer.remove(),this.layer=$('<div class="layer-text"></div>'),this.layer.append(this.content),this.layer.css(this.css),i.append(this.layer)},renderViewport:function(e){const i=$('<div class="layer-text"></div>');i.append(this.content),i.css(this.css),e.append(i)},destroyViewport:function(){null!=this.layer&&this.layer.remove()}},hzpdf={pdfjsLib:null,pdf:null,renderQueue:[],loadingPages:[],load:(e,i)=>(heyzine.config=i,new Promise((i,t)=>{heyzine.pdfjsLib=window["pdfjs-dist/build/pdf"],heyzine.pdfjsLib.GlobalWorkerOptions.workerSrc=PDFJS_WORKER;let n={url:e};if(heyzine.config.size>8e6){const i=2*Math.ceil(heyzine.config.size/heyzine.config.num_pages/2);n={url:e,disableStream:!0,disableAutoFetch:!0,rangeChunkSize:i}}var s=heyzine.pdfjsLib.getDocument(n);"undefined"!=typeof hzp&&(s.onProgress=function(e){0==hzp.val&&null!=e.total&&e.total>0&&(console.log("checked"),hzp.check(heyzine.config.width,heyzine.config.height,heyzine.config.num_pages,e.total,heyzine.config.id))}),s.promise.then(e=>{heyzine.pdf=e,i(this.pdf)},e=>{t(e)})})),processRenderQueue:function(e,i,t,n){this.renderQueue.length>0?(this.renderQueue.push({numPage:e,page:i,renderContext:t,resolve:n}),this.sortRenderQueue()):(this.renderQueue.push({numPage:e,page:i,renderContext:t,resolve:n}),this.processRender(e,i,t,n))},processRender:function(e,i,t,n){console.log(Math.round((new Date).getTime()/1e3)+" startrender "+e),i.render(t).promise.then(()=>{this.renderQueue=this.renderQueue.filter(e=>e.resolve!=n),console.log(Math.round((new Date).getTime()/1e3)+" endrender "+e),n(t),this.renderQueue.length>0&&(this.sortRenderQueue(),this.processRender(this.renderQueue[0].numPage,this.renderQueue[0].page,this.renderQueue[0].renderContext,this.renderQueue[0].resolve))})},sortRenderQueue:function(){this.renderQueue.sort((e,i)=>{const t=heyzine.getCurrentPage()-1;return e.numPage<t&&i.numPage<t||e.numPage>t&&i.numPage>t?e.numPage-i.numPage:e.numPage>=t&&i.numPage<t?-1:e.numPage<t&&i.numPage>=t?1:e.numPage-i.numPage})},turn:function(e,i,t){this.loadPage(e,i),this.loadPage(e+1,t)},loadPageView:function(e,i,t){heyzine.config;const n=$("<canvas>");return new Promise((s,o)=>{this.loadingPages.filter(i=>i.page==e&&i.size==t).length>0?o():(this.loadingPages.push({page:e,size:t}),this.loadPageUrl(e,n,t).then(n=>{if(heyzine.helpers.loading.hide(i),$(i).find(".page-img-content").length<=0){let t=new Image;t.src=n,t.style="width: 100%; height: 100%;",$(t).addClass("page-img-content"),$(t).appendTo(i),heyzine.coverPagesClass(t,e)}else $(i).find(".page-img-content").attr("src",n);this.loadingPages=this.loadingPages.filter(i=>!(i.page==e&&i.size==t)),s(i)}))})},loadPageUrl:function(e,i,t){return new Promise((n,s)=>{console.log(Math.round((new Date).getTime()/1e3)+" preurl "+e);let o=$(".page-wrapper").width(),a=$(".page-wrapper").height(),l=heyzine.getPageCache(e,t,o,a);null==l?heyzine.loadPage(e,i.get(0),t).then(s=>{let o=s.canvasContext.canvas.width,a=s.canvasContext.canvas.height;console.log(Math.round((new Date).getTime()/1e3)+" preblob "+e),$(i).get(0).toBlob((function(i){console.log(Math.round((new Date).getTime()/1e3)+" postblob "+e);let s=URL.createObjectURL(i);heyzine.setPageCache(e,t,o,a,s),n(s)}))}):n(l)})},loadPage:(e,i,t)=>new Promise((n,s)=>{console.log(Math.round((new Date).getTime()/1e3)+" loadpage "+e),heyzine.pdf.getPage(e).then((function(s){console.log(Math.round((new Date).getTime()/1e3)+" loadpage end "+e);var o=$(".page-wrapper").width();let a=$(".page-wrapper").height();o<=800&&(o=3*$(".page-wrapper").width()),void 0!==t&&("large"==t?(o=3*$(".page-wrapper").width()*window.devicePixelRatio,a=3*$(".page-wrapper").height()*window.devicePixelRatio):"xlarge"==t?(o=6*$(".page-wrapper").width()*window.devicePixelRatio,a=6*$(".page-wrapper").height()*window.devicePixelRatio):"normal"==t?(o=$(".page-wrapper").width()*window.devicePixelRatio,a=$(".page-wrapper").height()*window.devicePixelRatio):"small"==t?(o=$(".page-wrapper").width()/1.5*window.devicePixelRatio,a=$(".page-wrapper").height()/1.5*window.devicePixelRatio):(o=t,a=t*$(".page-wrapper").height()/$(".page-wrapper").width()));var l=o/(r=s.getViewport({scale:1})).width,r=s.getViewport({scale:l}),d=i.getContext("2d");i.height=Math.round(r.height),i.width=r.width;var h={canvasContext:d,viewport:r};heyzine.processRenderQueue(e,s,h,n)})).catch(e=>{console.log(e),s(e)})}),loadImage:(e,i)=>new Promise((i,t)=>{function n(){heyzine.config.toc=!1;const n=$("<canvas>");heyzine.loadPage(e,n.get(0),253.6).then(()=>{var e=new Image;e.src=n.get(0).toDataURL(),e.style="height: 100%;",e.onload=()=>{i(e)},e.onerror=()=>{t(e)}})}if(!1===heyzine.config.toc||null==heyzine.toc)return void n();const s=new Image;s.onload=function(){const t=130/s.naturalHeight*400;s.style="width: "+t+"px; object-position:-"+t*(e-1)+"px",heyzine.config.toc=!0,i(s)},s.onerror=function(){n()},s.src=heyzine.toc.src}),loadPageThumbnails:(e,i,t)=>new Promise((n,s)=>{var o=null==i?"full":"left";heyzine.loadImage(e,o).then(e=>{null!=i?heyzine.loadImage(i,"right").then(i=>{$(t).html(""),$(e).appendTo(t),$(i).appendTo(t),n()}):($(t).html(""),$(e).appendTo(t),n())})})},hzimg={pictures:[],walls:[],load:(e,i)=>(heyzine.config=i,new Promise((i,t)=>{$.getJSON(e,(function(e){heyzine.pictures=e,i("")}))})),loadPageView:(e,i,t)=>{heyzine.config;heyzine.helpers.loading.hide(i),$(i).html("");const n=$('<div class="hz-grid" id="hz-grid-'+e+'"></div>');for(let e=0;e<heyzine.pictures.length;e++)e<2?n.append('<div class="hz-grid-item" style="width: 160px;"><img src="'+heyzine.pictures[e].url+'" /></div>'):n.append('<div class="hz-grid-item" style="width: 80px;"><img src="'+heyzine.pictures[e].url+'" /></div>');n.appendTo(i);var s=new Freewall(n);return s.reset({selector:".hz-grid-item",animate:!1,draggable:!1,cellW:80,cellH:"auto",onResize:function(){s.fitZone(300,450)}}),heyzine.walls.push(s),s.fitZone(300,450),s.container.find("img").load((function(){s.fitZone(300,450)})),heyzine.coverPagesClass(i,e),new Promise((e,i)=>{e("")})},loadPageThumbnails:(e,i,t)=>{}},hzprev={pictureUrl:null,load:function(e,i){return heyzine.config=i,this.pictureUrl=e,new Promise((e,i)=>{e()})},loadPageView:function(e,i,t){return new Promise((t,n)=>{heyzine.helpers.loading.hide(i);var s=new Image;s.src=this.pictureUrl,s.style="width: 100%;",s.alt="Flipbook cover",$(s).appendTo(i),$(i).closest(".page-wrapper").css("box-shadow","0 0 20px 2px lightgray"),heyzine.coverPagesClass(s,e),t(i)})},loadPageThumbnails:(e,i,t)=>{}},"undefined"==typeof hzflip&&(hzflip={}),null==hzflip.helpers&&(hzflip.helpers={}),hzflip.helpers.loading={show:(e,i,t)=>{const n='<div class="loader loader-1-circle">   <div class="loader-1-circle1 loader-1-child"></div>      <div class="loader-1-circle2 loader-1-child"></div>      <div class="loader-1-circle3 loader-1-child"></div>      <div class="loader-1-circle4 loader-1-child"></div>      <div class="loader-1-circle5 loader-1-child"></div>      <div class="loader-1-circle6 loader-1-child"></div>      <div class="loader-1-circle7 loader-1-child"></div>      <div class="loader-1-circle8 loader-1-child"></div>      <div class="loader-1-circle9 loader-1-child"></div>      <div class="loader-1-circle10 loader-1-child"></div>     <div class="loader-1-circle11 loader-1-child"></div>     <div class="loader-1-circle12 loader-1-child"></div>   </div> ';if(null==e||null==i)return $(".page-wrapper .page").append('<div class="gradient"></div>'+n),void $(".page-wrapper img").css("opacity","0.5");if("crisp"==e&&null!=i){i.html('<div class="gradient"></div>'),i.append('<div class="loader-preview-cont"></div>');const e=i.find(".loader-preview-cont");return e.append(heyzine.thumbnail),e.append(n),void i.find(".loader-preview").addClass("loader-preview-effect-done")}if("blur"==e&&null!=i)if(null!=heyzine.toc){const e=new Image;e.src=heyzine.toc.src,e.classList.add("loader-preview"),e.classList.add("no-drag"),i.html('<div class="gradient"></div>'),i.append('<div class="loader-preview-cont"></div>');const s=i.find(".loader-preview-cont");s.append(e),s.append(n);const o=100/(heyzine.config.num_pages-1)*(t-1);i.find(".loader-preview").attr("draggable","false").css("object-position",o+"%")}else i.html('<div class="gradient">'+n+"</div>")},hide:function(e){return new Promise((i,t)=>{null==e?$("#magazineViewport").find(".loader").remove():e.find(".loader").remove(),heyzine.thumbnail&&$(heyzine.thumbnail).css("opacity",1);const n=$(e).find(".loader-preview-cont");n.length>0?(n.find(".loader-preview").addClass("loader-preview-effect-done"),setTimeout(()=>{n.remove(),i()},200)):i()})},startEffect:function(){const e=heyzine.getVisiblePagesElements();for(let i=0;i<e.length;i++)$(e[i]).find(".loader-preview").hasClass("loader-preview-effect")||($(e[i]).find(".loader-preview").addClass("loader-preview-effect"),setTimeout(()=>{$(e[i]).find(".loader-preview").css("filter","blur(1px)")},5e3))}},"undefined"==typeof hzflip&&(hzflip={}),null==hzflip.viewers&&(hzflip.viewers={}),hzflip.viewers.magazine={config:{},design:{},isZoomedIn:!1,isEditMode:!1,loadedPages:[],render:(e,i)=>{$("#magazineViewport").html(""),$("#magazineViewport").append($("#tplMagazine").html()),$("#magazineViewport").css("width","auto"),$("#magazineViewport").css("height","auto"),$("#canvas").removeClass("canvas-center"),$("#canvas").fadeIn(1e3);var t=$(".magazine"),n=hzflip.viewers.magazine;n.config=e,n.design=i,"book"==i.data.type?$(".magazine-viewport").addClass("magazine-book"):"album"==i.data.type&&$(".magazine-viewport").addClass("magazine-album"),"1"==n.design.data.rtl?$(".magazine").attr("dir","rtl"):$(".magazine").removeAttr("dir"),0!=t.width()&&0!=t.height()?(t.turn({width:e.width*e.isize*2,height:e.height*e.isize,duration:1e3,gradients:e.num_pages>1,autoCenter:!0,elevation:200,pages:e.num_pages,when:{start:function(e){n.isEditMode||n.isZoomedIn?e.preventDefault():heyzine.turning()},end:function(e,i,t){heyzine.turned(i.page,"end")},turning:function(e,i,t){heyzine.turning(i),$(".page.hard").closest(".page-wrapper").addClass("hard-page-wrapper")},turned:function(i,t,s){$(this).turn("center"),$(".page.hard").closest(".page-wrapper").addClass("hard-page-wrapper"),heyzine.helpers.loading.startEffect(),heyzine.turned(t);for(let i=4;i<8;i++)t+i<=e.num_pages&&!n.isPageLoaded(t+i)&&(n.addPage(t+i,$(this)),n.loadedPages.push(t+i))},missing:function(e,i){for(var t=0;t<i.length;t++)n.addPage(i[t],$(this)),n.loadedPages.push(i[t])}}}),e.num_pages<=1&&$("#magazineViewport .shadow").remove(),$(".magazine").addClass("animated"),n.resizeViewport()):setTimeout(hzflip.viewers.magazine.render,10)},goToPage:e=>{$(".magazine").turn("is")&&("string"==typeof e?$(".magazine").turn(e):$(".magazine").turn("page",e))},setZoom:(e,i)=>{var t=hzflip.viewers.magazine;t.isZoomedIn="zoomIn"==e},destroy:()=>{$("#magazineViewport").html("")},isPageLoaded:function(e){for(var i=0;i<this.loadedPages.length;i++)if(e==this.loadedPages[i])return!0;return!1},addPage:(e,i)=>{var t=$("<div />",{});t.addClass("page-cont");var n=hzflip.viewers.magazine;const s=n.config,o=n.design;null!=s&&null!=o&&null!=o.data&&null!=o.data.type&&("book"==o.data.type?(1==e||2==e||e==s.num_pages||s.num_pages%2==0&&e==s.num_pages-1)&&t.addClass("hard"):"album"==o.data.type&&t.addClass("hard")),i.turn("addPage",t,e)&&(1==e&&null!=s.thumbnail&&""!=$.trim(s.thumbnail)?heyzine.helpers.loading.show("crisp",t,e):heyzine.helpers.loading.show("blur",t,e),heyzine.loadPageView(e,t,"normal").then(()=>{heyzine.loadPageLayers(e,t,"normal")}).catch(()=>{}))},setEditMode:function(e){this.isEditMode=e},getCurrentPage:function(){return $(".magazine").turn("page")},getVisiblePages:function(){var e=hzflip.viewers.magazine;const i=$(".magazine").turn("page");var t=$("#canvas").width(),n=$("#canvas").height();return t<750&&t<=n&&0==e.design.data.show_double?[i]:1==i?[1]:this.isLastPage(i)?e.config.num_pages%2==0?[e.config.num_pages]:[e.config.num_pages-1,e.config.num_pages]:i%2==0?[i,i+1]:i%2!=0?[i-1,i]:void 0},getVisiblePagesElements:function(){const e=this.getVisiblePages(),i=[];for(let t=0;t<e.length;t++)i.push($('#magazineViewport [page="'+e[t]+'"]'));return i},isLastPage:e=>{var i=hzflip.viewers.magazine,t=null==e?$(".magazine").turn("page"):e,n=$("#canvas").width(),s=$("#canvas").height();return n<750&&n<=s&&0==i.design.data.show_double?i.config.num_pages==t:i.config.num_pages%2!=0&&(t==i.config.num_pages||t==i.config.num_pages-1)||i.config.num_pages%2==0&&t==i.config.num_pages},resizeViewport:()=>{var e=hzflip.viewers.magazine,i=$("#canvas").width(),t=$("#canvas").height(),n=$(".magazine").turn("options");if($(".magazine").removeClass("animated"),$(".magazine-viewport").css({width:i,height:t}),null!=n){var s=n.width;0==e.design.data.show_double&&(i<750&&i<=t?(s=n.width/2,"double"==$(".magazine").turn("display")&&$(".magazine").turn("display","single")):(s=n.width,"single"==$(".magazine").turn("display")&&$(".magazine").turn("display","double")));var o=e.calculateBound({width:s,height:n.height,boundWidth:Math.min(s,i),boundHeight:Math.min(n.height,t)});o.width%2!=0&&(o.width-=1),o.width==$(".magazine").width()&&o.height==$(".magazine").height()||($(".magazine").turn("size",o.width,o.height),hzflip.controls.resizeViewport(o)),$(".magazine").css({top:-o.height/2,left:-o.width/2}),$(".magazine").addClass("animated"),$(document).trigger("heyzineResizeViewport",[])}},calculateBound:e=>{var i={width:e.width,height:e.height};if(i.width>e.boundWidth||i.height>e.boundHeight){var t=i.width/i.height;e.boundWidth/t>e.boundHeight&&e.boundHeight*t<=e.boundWidth?(i.width=Math.round(e.boundHeight*t),i.height=e.boundHeight):(i.width=e.boundWidth,i.height=Math.round(e.boundWidth/t))}return i}},"undefined"==typeof hzflip&&(hzflip={}),null==hzflip.viewers&&(hzflip.viewers={}),hzflip.viewers.swiper={slides:[],config:{},design:{},swiper:{},enabledEvents:!0,render:(e,i)=>{$("#magazineViewport").html(""),$("#magazineViewport").append($("#tplSwiper").html()),$("#canvas").addClass("canvas-center"),$("#canvas").fadeIn(1e3);var t=hzflip.viewers.swiper;t.config=e,t.design=i,"1"==t.design.data.rtl?$("#magazineViewport .container").attr("dir","rtl"):$("#magazineViewport .container").removeAttr("dir"),t.slides=[];for(let i=0;i<e.num_pages;i++)t.slides.push(i);t.resizeViewport();const n="fade"==i.data.type?null:i.data.type;t.swiper=new Swiper("#magazineViewport .container",{direction:"horizontal",effect:n,preventClicks:!1,preventClicksPropagation:!1,coverflowEffect:{rotate:30,slideShadows:!1},flipEffect:{rotate:30,slideShadows:!0},loop:!1,navigation:{nextEl:".btnNext",prevEl:".btnPrevious"},virtual:{slides:t.slides,addSlidesBefore:2,addSlidesAfter:2,renderExternal:function(e){const i=$("#magazineViewport").find(".swiper-wrapper");i.find(".swiper-slide").each((function(){var i=$(this).attr("data-slidei");(i<e.from||i>e.to)&&$(this).remove()}));const n=i.find(".swiper-slide").first(),s=i.find(".swiper-slide").last(),o=n.length>0?n.attr("data-slidei"):0,a=s.length>0?s.attr("data-slidei"):0;for(let n=0;n<e.slides.length;n++){const s=e.slides[n];if(i.find('[data-slidei="'+s+'"]').length<=0&&s>=a){const e=$('<div class="swiper-slide page-wrapper" data-slidei="'+s+'" page="'+(s+1)+'"><div class="swiper-zoom-container page-cont"></div></div>');e.appendTo(i),s+1==1?heyzine.helpers.loading.show("crisp",e.find(".swiper-zoom-container"),s+1):heyzine.helpers.loading.show("blur",e.find(".swiper-zoom-container"),s+1),heyzine.loadPageView(s+1,e.find(".swiper-zoom-container"),"normal").then(()=>{$(".swiper-slide").children().addClass("inactive"),$('.swiper-slide[data-slidei="'+t.slides[t.swiper.realIndex]+'"]').children().removeClass("inactive"),$(".swiper-slide").removeClass("swiper-slide-active"),$('.swiper-slide[data-slidei="'+t.slides[t.swiper.realIndex]+'"]').addClass("swiper-slide-active"),heyzine.loadPageLayers(s+1,e.find(".swiper-zoom-container"),"normal")}).catch(()=>{})}}for(let n=e.slides.length-1;n>=0;n--){const s=e.slides[n];if(i.find('[data-slidei="'+s+'"]').length<=0&&s<o){const e=$('<div class="swiper-slide page-wrapper" data-slidei="'+s+'" page="'+(s+1)+'"><div class="swiper-zoom-container page-cont"></div></div>');e.prependTo(i),s+1==1?heyzine.helpers.loading.show("crisp",e.find(".swiper-zoom-container"),s+1):heyzine.helpers.loading.show("blur",e.find(".swiper-zoom-container"),s+1),heyzine.loadPageView(s+1,e.find(".swiper-zoom-container"),"normal").then(()=>{$(".swiper-slide").children().addClass("inactive"),$('.swiper-slide[data-slidei="'+t.slides[t.swiper.realIndex]+'"]').children().removeClass("inactive"),$(".swiper-slide").removeClass("swiper-slide-active"),$('.swiper-slide[data-slidei="'+t.slides[t.swiper.realIndex]+'"]').addClass("swiper-slide-active"),heyzine.loadPageLayers(s+1,e.find(".swiper-zoom-container"),"normal")}).catch(()=>{})}}$(".swiper-slide").css("left",e.offset)}},on:{slideChange:function(){var e=t.slides[t.swiper.realIndex];$(".swiper-slide").children().addClass("inactive"),$('.swiper-slide[data-slidei="'+e+'"]').children().removeClass("inactive"),heyzine.turning(t.slides[t.swiper.realIndex]+1)},zoomChange:function(e,i,t){},transitionEnd:function(){var e=t.slides[t.swiper.realIndex];$('.swiper-slide[data-slidei="'+e+'"]').addClass("swiper-slide-active"),heyzine.turned(e+1),heyzine.helpers.loading.startEffect()}}}),$("#canvas").on("mousedown",".swiper-zoom-container > img",(function(e){return e.preventDefault(),!0}))},goToPage:(e,i)=>{var t=hzflip.viewers.swiper;"string"!=typeof e||"next"!=e||"keyboard"!=i&&"button-nav"!=i?"string"!=typeof e||"previous"!=e||"keyboard"!=i&&"button-nav"!=i?isNaN(parseInt(e))||t.swiper.slideTo(parseInt(e)-1):t.swiper.slidePrev():t.swiper.slideNext()},setZoom:function(e,i){null==e?this.enabledEvents||(heyzine.viewer.swiper.attachEvents(),this.enabledEvents=!0):"string"==typeof e&&("zoomIn"==e?this.enabledEvents&&(heyzine.viewer.swiper.detachEvents(),this.enabledEvents=!1):"zoomOut"==e&&(this.enabledEvents||(heyzine.viewer.swiper.attachEvents(),this.enabledEvents=!0)))},destroy:()=>{$("#magazineViewport").html(""),$("#magazineViewport").css("padding","0")},resizeViewport:function(){var e=hzflip.viewers.swiper;const i=scaler.getObjectFitSize(!0,$("#canvas").width(),$("#canvas").height(),this.config.width,this.config.height);$("#magazineViewport").attr("style","width:"+i.width+"px !important; height: "+Math.trunc(i.height)+"px !important;"),null!=e.swiper&&e.swiper.update&&e.swiper.update()},getCurrentPage:()=>{var e=hzflip.viewers.swiper;return e.slides[e.swiper.realIndex]+1},getVisiblePages:function(){var e=hzflip.viewers.swiper;const i=e.slides[e.swiper.realIndex]+1,t=[];return t.push(i),t},getVisiblePagesElements:function(){const e=this.getVisiblePages(),i=[];for(let t=0;t<e.length;t++)i.push($('#magazineViewport [page="'+e[t]+'"]'));return i},isLastPage:e=>{var i=hzflip.viewers.swiper;return null==e?i.slides[i.swiper.realIndex]+1==i.config.num_pages:e==i.config.num_pages},setEditMode:function(e){}},"undefined"==typeof hzp&&(hzp={}),hzp={val:!1,hash:function(e,i){return crypto.subtle.digest(e,new TextEncoder("utf-8").encode(i)).then(e=>Array.prototype.map.call(new Uint8Array(e),e=>("00"+e.toString(16)).slice(-2)).join(""))},validate:function(e,i,t,n,s){return new Promise((o,a)=>{var l=e+"-"+i+"-"+t+"-"+n;this.hash("SHA-256",l).then(e=>{o(s==e.substr(0,41))})})},check:function(e,i,t,n,s){this.validate(e,i,t,n,s).then(e=>{if(e)hzp.val=!0;else{console.log("sc");var i=["//h","zin","htt","get","ey","co","e.","ps:"];document.location.href=i[2]+i[7]+i[0]+i[4]+i[1]+i[6]+i[5]+"m"}})}},heyzineDesign={data:{},afterLoad:function(e){null!=e.arrows&&($(".next-button").css("background-image",""),$(".previous-button").css("background-image",""),$(".next-button").css("display",""),$(".previous-button").css("display",""),$(".next-button").removeClass("corner-right"),$(".previous-button").removeClass("corner-left"),$(".next-button").removeClass("next-show"),$(".previous-button").removeClass("previous-show"),1==e.arrows?($(".next-button").addClass("corner-right"),$(".previous-button").addClass("corner-left"),$(".next-button").addClass("next-show"),$(".previous-button").addClass("previous-show"),(document.location.href.indexOf("#page/1")>0||document.location.href.indexOf("#page")<0)&&$(".previous-button").css("display","none"),null!=e.controls_iconset?($(".next-button").css("background-image","url('flipbook/img/"+e.controls_iconset+".png')"),$(".previous-button").css("background-image","url('flipbook/img/"+e.controls_iconset+".png')")):($(".next-button").css("background-image","url('flipbook/img/iconset2_3.png')"),$(".previous-button").css("background-image","url('flipbook/img/iconset2_3.png')"))):0==e.arrows||(2==e.arrows?($(".next-button").addClass("next-show"),$(".previous-button").addClass("previous-show"),(document.location.href.indexOf("#page/1")>0||document.location.href.indexOf("#page")<0)&&$(".previous-button").css("display","none")):($(".next-button").css("display","none"),$(".previous-button").css("display","none")))),null==e.show_slider||0!=$.trim(e.show_slider)&&!1!==e.show_slider?$(".control-bottom .page-bar").show():$(".control-bottom .page-bar").hide(),null!=e.controls_iconset?$(".hz-icon").css("background-image","url('flipbook/img/"+e.controls_iconset+".png')"):$(".hz-icon").css("background-image","url('flipbook/img/iconset2_3.png')")},load:function(e){if(heyzineDesign.data=e,$(".logo-backs2").hide(),$(".down-pdf").show(),$(".flipbook-title").hide(),$(".flipbook-title p").html(""),$(".flipbook-title h2").html(""),$(".flipbook-title h1").html(""),null!=e.background&&""!=$.trim(e.background)&&("none"==e.background?$(".logo-backs").css("background-image","none"):$(".logo-backs").css("background-image","url('"+e.background+"')")),null!=e.background_color&&""!=$.trim(e.background_color)&&$(".logo-backs").parent().css("background-color",e.background_color),null!=e.background_style&&""!=$.trim(e.background_style)){const i=e.background_style;null!=i.size&&$(".logo-backs").css("background-size",i.size),null!=i.size&&$(".logo-backs").css("background-position",i.position),null!=i.transparency&&$(".logo-backs").css("opacity",1-i.transparency/100),null!=i.blur&&$(".logo-backs").css("filter","blur("+i.blur+"px)")}null==e.show_zoom||0!=$.trim(e.show_zoom)&&!1!==e.show_zoom?$("#pnlControls .zoom-icon").show():$("#pnlControls .zoom-icon").hide(),null==e.show_prevnext||1!=$.trim(e.show_prevnext)&&!0!==e.show_prevnext?($("#btnNavPrev").hide(),$("#btnNavNext").hide()):($("#btnNavPrev").show(),$("#btnNavNext").show()),null==e.show_start||1!=$.trim(e.show_start)&&!0!==e.show_start?$("#btnNavStart").hide():$("#btnNavStart").show(),null==e.show_end||1!=$.trim(e.show_end)&&!0!==e.show_end?$("#btnNavEnd").hide():$("#btnNavEnd").show(),null==e.sound_flip||1!=$.trim(e.sound_flip)&&!0!==e.sound_flip?$("#btnSoundOff").hide():$("#btnSoundOff").show(),null!=e.company_logo&&""!=$.trim(e.company_logo)?($(".logo-backs2").attr("src",e.company_logo),$(".logo-backs2").show()):($(".logo-backs2").attr("src",""),$(".logo-backs2").hide()),$(".logo-backs2").length>0&&$(".logo-backs2").parent().is("a")&&$(".logo-backs2").unwrap(),null!=e.company_logo&&""!=$.trim(e.company_logo)&&null!=e.company_logo_link&&""!=$.trim(e.company_logo_link)&&($(".logo-backs2").wrap('<a rel="nofollow,noindex">'),$(".logo-backs2").parent().attr("href",e.company_logo_link),$(".logo-backs2").css("z-index",1)),null!=e.show_text&&1==e.show_text&&null!=e.title&&""!=$.trim(e.title)&&($(".flipbook-title h1").html(sanitizer.sanitize(e.title.replace(/(?:\r\n|\r|\n)/g,"<br>"))),$(".flipbook-title").show()),null!=e.show_text&&1==e.show_text&&null!=e.subtitle&&""!=$.trim(e.subtitle)&&($(".flipbook-title h2").html(sanitizer.sanitize(e.subtitle.replace(/(?:\r\n|\r|\n)/g,"<br>"))),$(".flipbook-title").show()),null!=e.show_text&&1==e.show_text&&null!=e.description&&""!=$.trim(e.description)&&($(".flipbook-title p").html(sanitizer.sanitize(e.description.replace(/(?:\r\n|\r|\n)/g,"<br>"))),$(".flipbook-title").show()),null!=e.show_shadow&&("0"==e.show_shadow?$("#magazineViewport").addClass("no-shadow"):$("#magazineViewport").removeClass("no-shadow")),null!=e.show_depth&&("0"==e.show_depth?$("#magazineViewport").addClass("no-depth"):$("#magazineViewport").removeClass("no-depth")),null==e.show_download||0!=$.trim(e.show_download)&&!1!==e.show_download?$(".down-pdf").show():$(".down-pdf").hide(),null==e.show_fullscreen||0==$.trim(e.show_fullscreen)||!1===e.show_fullscreen?$("#btnFullscreen").hide():$("#btnFullscreen").show(),null!=e.controls_iconset?$(".hz-icon").css("background-image","url('flipbook/img/"+e.controls_iconset+".png')"):$(".hz-icon").css("background-image","url('flipbook/img/iconset2_3.png')"),null!=e.controls_style&&($("#pnlControls").attr("style",e.controls_style),"10px"==$("#pnlControls").css("top")||"30px"==$("#pnlControls").css("top")?$("#pnlZoomStep").css({top:"100px",bottom:"auto"}):$("#pnlZoomStep").css({top:"auto",bottom:"100px"}),"50px"==$("#pnlControls").css("left")?$("#pnlZoomStep").css({left:"50px",right:"auto"}):$("#pnlZoomStep").css({left:"auto",right:"50px"})),$("#pnlControls").show(),$("#pnlControls > *").is(":visible")?$("#pnlControls").show():$("#pnlControls").hide(),(document.location.href.indexOf("?ctl=0")>0||document.location.href.indexOf("&ctl=0")>0)&&$("#pnlControls").hide(),heyzineDesign.afterLoad(e)}},resetHeyzine=null,heyzine={config:null,design:heyzineDesign,controls:hzflip.controls,layers:hzflip.layers,helpers:hzflip.helpers,viewer:null,largeWidth:2214,url:null,thumbnailPath:THUMBNAIL_PATH,thumbnail:new Image,tocPath:TOC_PATH,toc:new Image,timerRes:!1,destroy:()=>{heyzine=$.extend(!0,{},resetHeyzine)},reload:function(e){try{sessionStorage.clear()}catch(e){console.log("sessionStorage not available")}return new Promise((i,t)=>{heyzine.render(),null!=e&&(1==e?(heyzine.controls.initViewerControls(heyzine.config),heyzine.layers.init(heyzine.config)):(heyzine.controls.initViewerControls(e),heyzine.layers.init(e))),i()})},setViewer:(e,i)=>{heyzine.viewer.destroy(),heyzine.design.data.type=i,heyzine.config.type=i,heyzine.config.viewer=e,heyzine.viewer="SWIPER"==e?hzflip.viewers.swiper:hzflip.viewers.magazine},load:(e,i)=>{try{sessionStorage.clear()}catch(e){console.log("sessionStorage not available")}return heyzine.thumbnail.src=heyzine.thumbnailPath+i.thumbnail,heyzine.thumbnail.classList.add("loader-preview"),heyzine.thumbnail.alt="flipbook cover",null!=i.design.embed_mode&&1==i.design.embed_mode||(heyzine.toc.onerror=()=>{heyzine.toc=null},heyzine.toc.src=heyzine.tocPath+i.thumbnail.replace("-thumb.jpg","")+"-toc.jpg"),heyzine.url=e,heyzine.config=i,(document.location.href.indexOf("?dp=1")>0||document.location.href.indexOf("6dp=1")>0)&&(heyzine.design.data.show_double=1),new Promise((t,n)=>{null==resetHeyzine&&(resetHeyzine=$.extend(!0,{},heyzine)),"IMG"==heyzine.config.mode?$.extend(!0,heyzine,hzimg):"PREV"==heyzine.config.mode?$.extend(!0,heyzine,hzprev):$.extend(!0,heyzine,hzpdf),"SWIPER"==heyzine.config.viewer?heyzine.viewer=hzflip.viewers.swiper:heyzine.viewer=hzflip.viewers.magazine,heyzine.load(e,i).then(()=>{heyzine.layers.init(i),heyzine.render(),heyzine.controls.init(i),heyzine.refreshSession(),$(window).resize((function(){heyzine.mobileFullHeight(),heyzine.viewer.resizeViewport(),heyzine.adjustResolution()})).bind("orientationchange",(function(){let e=heyzine.viewer.getCurrentPage();heyzine.mobileFullHeight(),heyzine.viewer.resizeViewport(),heyzine.reload(!0),null!=e&&heyzine.viewer.goToPage(e)})),heyzine.mobileFullHeight(),heyzine.viewer.resizeViewport(),t("")})})},refreshSession:function(){heyzine.url.indexOf("/private/"+heyzine.config.name)>0&&setInterval(()=>{$.getJSON("/private/session/"+heyzine.config.name,(function(e){heyzine.pdf._transport._fullReader._stream.source.url=e.url,heyzine.url=e.url,$(".down-pdf").attr("href",e.download)}))},3e5)},adjustResolution:function(e){null==e&&(e=500),this.timerRes=!0,setTimeout(()=>{const e=heyzine.getVisiblePages();for(let i=0;i<e.length;i++){const t=e[i];let n=$("[page="+e[i]+"] .page-cont");heyzine.loadPageView(t,n,"normal").then(()=>{this.timerRes=!1}).catch(()=>{})}},e)},setEditMode:function(e){heyzine.viewer.setEditMode(e),heyzine.controls.setEditMode(e),heyzine.layers.setEditMode(e)},mobileFullHeight:function(){$.isTouch&&($("body").css("height",window.innerHeight+"px"),$(".logo-backs").css("height",window.innerHeight+"px"))},render:()=>{heyzine.viewer.render(heyzine.config,heyzine.design)},getCurrentPage:function(){return heyzine.viewer.getCurrentPage()},getVisiblePages:function(){return heyzine.viewer.getVisiblePages()},getVisiblePagesElements:function(){return heyzine.viewer.getVisiblePagesElements()},isLastPage:function(e){return heyzine.viewer.isLastPage(e)},showLoader:(e,i,t)=>{},turned:function(e,i){"end"!=i&&(heyzine.controls.turned(e),heyzine.layers.turned(e)),heyzine.adjustResolution(0)},turning:e=>{heyzine.controls.turning(e),heyzine.layers.turning(e)},loadPageView:(e,i,t)=>{heyzine.loadPageView(e,i,t)},loadPageLayers:(e,i,t)=>{heyzine.layers.loadPageLayers(e,i,t)},loadPageThumbnails:(e,i,t)=>{heyzine.loadPageThumbnails(e,i,t)},goToPage:(e,i)=>{heyzine.viewer.goToPage(e,i)},setZoom:(e,i)=>{heyzine.controls.setZoom(e,i)},setPageCache:function(e,i,t,n,s){const o="hz_vp_"+Math.trunc(t)+"_"+Math.trunc(n)+"_p_"+e+"_"+i;console.log("set:"+o),this.isSessionStorageEnabled()?sessionStorage.setItem(o,s):window.hstorage[o]=s},getPageCache:function(e,i,t,n){const s="hz_vp_"+Math.trunc(t)+"_"+Math.trunc(n)+"_p_"+e+"_"+i;return console.log("get:"+s),this.isSessionStorageEnabled()?sessionStorage.getItem(s):window.hstorage[s]},isSessionStorageEnabled:function(){try{var e="__test__";return sessionStorage.setItem(e,e),sessionStorage.removeItem(e),!0}catch(e){return null==window.hstorage&&(window.hstorage=[]),!1}},setZoomViewer:(e,i)=>heyzine.viewer.setZoom(e,i),coverPagesClass:(e,i)=>{const t=heyzine.config;var n=$(e).closest(".page");i-t.design.cover==1?n.addClass("page-first"):i-t.design.cover==t.num_pages&&n.addClass("page-last")}};